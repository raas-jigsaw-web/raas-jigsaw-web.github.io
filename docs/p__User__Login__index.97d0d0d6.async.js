"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{55111:function(Fe,G,t){t.r(G),t.d(G,{default:function(){return me}});var z=t(15009),d=t.n(z),W=t(97857),v=t.n(W),H=t(99289),y=t.n(H),V=t(5574),$=t.n(V),Y=t(1210),K=t(39654),u=t(80854),U=t(67294),e=t(85893),Q=function(){var a=(0,u.useIntl)(),s=a.formatMessage({id:"app.copyright.produced",defaultMessage:"\u8682\u8681\u96C6\u56E2\u4F53\u9A8C\u6280\u672F\u90E8\u51FA\u54C1"}),r=new Date().getFullYear();return(0,e.jsx)(K.q,{style:{background:"none"},copyright:"".concat(r," ").concat(s),links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:(0,e.jsx)(Y.Z,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})},J=Q;function xe(n){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/currentUser",_objectSpread({method:"GET"},a||{})));case 1:case"end":return r.stop()}},n)})),x.apply(this,arguments)}function Se(n){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/login/outLogin",_objectSpread({method:"POST"},a||{})));case 1:case"end":return r.stop()}},n)})),S.apply(this,arguments)}function X(n,a){return T.apply(this,arguments)}function T(){return T=y()(d()().mark(function n(a,s){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/login/account",v()({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return i.stop()}},n)})),T.apply(this,arguments)}function Te(n){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/notices",_objectSpread({method:"GET"},a||{})));case 1:case"end":return r.stop()}},n)})),A.apply(this,arguments)}function Ae(n,a){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,s){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/rule",_objectSpread({method:"GET",params:_objectSpread({},a)},s||{})));case 1:case"end":return i.stop()}},n)})),b.apply(this,arguments)}function be(n){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({method:"PUT"},a||{})));case 1:case"end":return r.stop()}},n)})),C.apply(this,arguments)}function Ce(n){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({method:"POST"},a||{})));case 1:case"end":return r.stop()}},n)})),L.apply(this,arguments)}function Le(n){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({method:"DELETE"},a||{})));case 1:case"end":return r.stop()}},n)})),R.apply(this,arguments)}function q(n,a){return w.apply(this,arguments)}function w(){return w=y()(d()().mark(function n(a,s){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/login/captcha",v()({method:"GET",params:v()({},a)},s||{})));case 1:case"end":return i.stop()}},n)})),w.apply(this,arguments)}var _=t(88777),ee=t(96833),re=t(97487),ae=t(87547),k=t(94149),te=t(24454),ne=t(4016),B=t(5966),se=t(16434),ue=t(63434),P=t(4537),ie=t(99138),Z=t(2453),oe=t(86873),le=t(67610),ce=t(73935),ge=function(){var a=(0,P.l)(function(s){var r=s.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:r.colorPrimaryActive}}});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{className:a},"AlipayCircleOutlined"),(0,e.jsx)(ee.Z,{className:a},"TaobaoCircleOutlined"),(0,e.jsx)(re.Z,{className:a},"WeiboCircleOutlined")]})},de=function(){var a=(0,P.l)(function(s){var r=s.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:r.borderRadius,":hover":{backgroundColor:r.colorBgTextHover}}});return(0,e.jsx)("div",{className:a,"data-lang":!0,children:u.SelectLang&&(0,e.jsx)(u.SelectLang,{})})},N=function(a){var s=a.content;return(0,e.jsx)(ie.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},pe=function(){var a=(0,U.useState)({}),s=$()(a,2),r=s[0],i=s[1],fe=(0,U.useState)("account"),O=$()(fe,2),j=O[0],he=O[1],I=(0,u.useModel)("@@initialState"),M=I.initialState,ve=I.setInitialState,ye=(0,P.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),c=(0,u.useIntl)(),je=function(){var h=y()(d()().mark(function g(){var p,m;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,M==null||(p=M.fetchUserInfo)===null||p===void 0?void 0:p.call(M);case 2:m=o.sent,m&&(0,ce.flushSync)(function(){ve(function(F){return v()(v()({},F),{},{currentUser:m})})});case 4:case"end":return o.stop()}},g)}));return function(){return h.apply(this,arguments)}}(),Me=function(){var h=y()(d()().mark(function g(p){var m,f,o,F;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,X(v()(v()({},p),{},{type:j}));case 3:if(m=l.sent,m.status!=="ok"){l.next=12;break}return f=c.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Z.ZP.success(f),l.next=9,je();case 9:return o=new URL(window.location.href).searchParams,u.history.push(o.get("redirect")||"/"),l.abrupt("return");case 12:console.log(m),i(m),l.next=21;break;case 16:l.prev=16,l.t0=l.catch(0),F=c.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(l.t0),Z.ZP.error(F);case 21:case"end":return l.stop()}},g,null,[[0,16]])}));return function(p){return h.apply(this,arguments)}}(),D=r.status,E=r.type;return(0,e.jsxs)("div",{className:ye,children:[(0,e.jsx)(u.Helmet,{children:(0,e.jsxs)("title",{children:[c.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",le.Z.title]})}),(0,e.jsx)(de,{}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(ne.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:c.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(u.FormattedMessage,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(ge,{},"icons")],onFinish:function(){var h=y()(d()().mark(function g(p){return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Me(p);case 2:case"end":return f.stop()}},g)}));return function(g){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(oe.Z,{activeKey:j,onChange:he,centered:!0,items:[{key:"account",label:c.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},{key:"mobile",label:c.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})}]}),D==="error"&&E==="account"&&(0,e.jsx)(N,{content:c.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),j==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(ae.Z,{})},placeholder:c.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(B.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(k.Z,{})},placeholder:c.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),D==="error"&&E==="mobile"&&(0,e.jsx)(N,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),j==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(te.Z,{})},name:"mobile",placeholder:c.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(se.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(k.Z,{})},captchaProps:{size:"large"},placeholder:c.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(g,p){return g?"".concat(p," ").concat(c.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):c.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var h=y()(d()().mark(function g(p){var m;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,q({phone:p});case 2:if(m=o.sent,m){o.next=5;break}return o.abrupt("return");case 5:Z.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return o.stop()}},g)}));return function(g){return h.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(ue.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(J,{})]})},me=pe}}]);
