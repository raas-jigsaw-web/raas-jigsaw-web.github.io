"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[157],{91882:function(Ut,q,d){d.r(q),d.d(q,{default:function(){return Rt}});var ut=d(97857),S=d.n(ut),ct=d(12444),L=d.n(ct),mt=d(72004),P=d.n(mt),ft=d(25098),j=d.n(ft),gt=d(31996),_=d.n(gt),xt=d(26037),tt=d.n(xt),pt=d(9783),i=d.n(pt),et=d(67294),yt=d(68400),Ct=d.n(yt),bt=d(85121),rt,ot=bt.ZP.div(rt||(rt=Ct()([`
  .rotate {
    position: absolute;
    left: 0em;
    top: -2em;
    width: 1.2em;
    height: 1.2em;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }

  .reverse {
    position: absolute;
    left: 3em;
    top: -2em;
    width: 1.2em;
    height: 1.2em;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
`]))),E=function(){function e(){L()(this,e)}return P()(e,null,[{key:"isEmpty",value:function(t){return!t||t.length<1||t[0].length<1}},{key:"sum",value:function(t){if(this.isEmpty(t))return 0;for(var o=0,h=0;h<t.length;h++)for(var r=0;r<t[0].length;r++)o+=t[h][r];return o}},{key:"operable",value:function(t){return!(this.isEmpty(t)||t.length!==t[0].length||t.length!==3&&t.length!==4)}},{key:"copy",value:function(t){if(!this.operable(t))throw new Error;var o=this.array(t.length,t[0].length);return o.length>=3&&(o[0][0]=t[0][0],o[0][1]=t[0][1],o[0][2]=t[0][2],o[1][0]=t[1][0],o[1][1]=t[1][1],o[1][2]=t[1][2],o[2][0]=t[2][0],o[2][1]=t[2][1],o[2][2]=t[2][2]),o.length>=4&&(o[0][3]=t[0][3],o[1][3]=t[1][3],o[2][3]=t[2][3],o[3][0]=t[3][0],o[3][1]=t[3][1],o[3][2]=t[3][2],o[3][3]=t[3][3]),o}},{key:"left0",value:function(t){if(!this.operable(t))throw new Error;var o=this.array(t.length,t[0].length);return o.length>=3&&(o[0][0]=t[0][1],o[0][1]=t[0][2],o[1][0]=t[1][1],o[1][1]=t[1][2],o[2][0]=t[2][1],o[2][1]=t[2][2]),o.length>=4&&(o[0][2]=t[0][3],o[1][2]=t[1][3],o[2][2]=t[2][3],o[3][0]=t[3][1],o[3][1]=t[3][2],o[3][2]=t[3][3]),o}},{key:"left",value:function(t){if(!this.operable(t))throw new Error;for(var o=this.sum(t),h=this.copy(t);;){var r=this.left0(h);if(o!==this.sum(r))return h;h=r}}},{key:"top0",value:function(t){if(!this.operable(t))throw new Error;var o=this.array(t.length,t[0].length);return o.length>=3&&(o[0][0]=t[1][0],o[0][1]=t[1][1],o[0][2]=t[1][2],o[1][0]=t[2][0],o[1][1]=t[2][1],o[1][2]=t[2][2]),o.length>=4&&(o[0][3]=t[1][3],o[1][3]=t[2][3],o[2][0]=t[3][0],o[2][1]=t[3][1],o[2][2]=t[3][2],o[2][3]=t[3][3]),o}},{key:"top",value:function(t){if(!this.operable(t))throw new Error;for(var o=this.sum(t),h=this.copy(t);;){var r=this.top0(h);if(o!==this.sum(r))return h;h=r}}},{key:"move2TopLeft",value:function(t){return this.top(this.left(t))}}]),e}();i()(E,"array",function(e,n){for(var t=[],o=0;o<e;o++){var h=[];t[o]=h;for(var r=0;r<n;r++)t[o].push(0)}return t}),i()(E,"rotate",function(e){if(!E.operable(e))throw new Error;var n=E.array(e.length,e[0].length);return e.length===3&&(n[0][0]=e[2][0],n[0][1]=e[1][0],n[0][2]=e[0][0],n[1][0]=e[2][1],n[1][1]=e[1][1],n[1][2]=e[0][1],n[2][0]=e[2][2],n[2][1]=e[1][2],n[2][2]=e[0][2]),e.length===4&&(n[0][0]=e[3][0],n[0][1]=e[2][0],n[0][2]=e[1][0],n[0][3]=e[0][0],n[1][0]=e[3][1],n[1][1]=e[2][1],n[1][2]=e[1][1],n[1][3]=e[0][1],n[2][0]=e[3][2],n[2][1]=e[2][2],n[2][2]=e[1][2],n[2][3]=e[0][2],n[3][0]=e[3][3],n[3][1]=e[2][3],n[3][2]=e[1][3],n[3][3]=e[0][3]),n}),i()(E,"reverse",function(e){if(!E.operable(e))throw new Error;var n=E.array(e.length,e[0].length);return e.length===3&&(n[0][0]=e[0][2],n[0][1]=e[0][1],n[0][2]=e[0][0],n[1][0]=e[1][2],n[1][1]=e[1][1],n[1][2]=e[1][0],n[2][0]=e[2][2],n[2][1]=e[2][1],n[2][2]=e[2][0]),e.length===4&&(n[0][0]=e[0][3],n[0][1]=e[0][2],n[0][2]=e[0][1],n[0][3]=e[0][0],n[1][0]=e[1][3],n[1][1]=e[1][2],n[1][2]=e[1][1],n[1][3]=e[1][0],n[2][0]=e[2][3],n[2][1]=e[2][2],n[2][2]=e[2][1],n[2][3]=e[2][0],n[3][0]=e[3][3],n[3][1]=e[3][2],n[3][2]=e[3][1],n[3][3]=e[3][0]),n});var R=d(80854),kt=[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],wt=[[1,0,0],[1,1,0],[1,1,0]],St=[[1,1,1],[1,0,1],[0,0,0]],zt=[[0,0,1],[0,0,1],[1,1,1]],jt=[[1,1,0],[0,1,0],[0,1,1]],Dt=[[1,1,1],[0,1,0],[0,1,0]],Et=[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Bt=[[0,1,0],[0,1,0],[1,1,0]],Yt=[[1,1,0,0],[0,1,1,1],[0,0,0,0],[0,0,0,0]],It=[[1,1,0],[0,1,1],[0,0,0]],Y={A:"rgb(105,165,45)",B:"rgb(145,85,160)",C:"rgb(230,225,45)",D:"rgb(40,130,240)",E:"rgb(120,100,200)",F:"rgb(170,190,110)",G:"rgb(220,110,160)",H:"rgb(230,110,15)",I:"rgb(80,180,140)",J:"rgb(220,150,100)"},Gt=null,Xt=[{name:"A",matrix:kt,color:Y.A},{name:"B",matrix:wt,color:Y.B},{name:"C",matrix:St,color:Y.C},{name:"D",matrix:zt,color:Y.D},{name:"E",matrix:jt,color:Y.E},{name:"F",matrix:Dt,color:Y.F},{name:"G",matrix:Et,color:Y.G},{name:"H",matrix:Bt,color:Y.H},{name:"I",matrix:Yt,color:Y.I},{name:"J",matrix:It,color:Y.J}],a=P()(function e(){L()(this,e)});i()(a,"Rows",8),i()(a,"Columns",7),i()(a,"BoxSize",90),i()(a,"backgroundColor",["white","#eee"]),i()(a,"backgroundColorHighLight","#f1c309"),i()(a,"border","1px solid rgb(25,140,250)"),i()(a,"Id","backboard-id");var Mt=[["january","february","march","april","may","june",""],["july","august","september","october","november","december",""],["01","02","03","04","05","06","07"],["08","09","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31","sunday","monday","tuesday","wednesday"],["","","","","thursday","friday","saturday"]],nt=[[6,3],[6,4],[6,5],[6,6],[7,4],[7,5],[7,6]],it=[[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[6,0],[6,1],[6,2]],at=[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5]],s=d(85893),st=P()(function e(){L()(this,e),i()(this,"key",void 0),i()(this,"pieceName",void 0),i()(this,"top",void 0),i()(this,"left",void 0),i()(this,"width",void 0),i()(this,"height",void 0),i()(this,"x",void 0),i()(this,"y",void 0),i()(this,"maxX",void 0),i()(this,"maxY",void 0),i()(this,"minX",void 0),i()(this,"minY",void 0),i()(this,"rotateAngle",void 0),i()(this,"rotatable",void 0),i()(this,"reversible",void 0),i()(this,"movable",void 0),i()(this,"matrix",void 0),i()(this,"boxSize",void 0),i()(this,"boxBackgroundColor",void 0),i()(this,"boxCursor",void 0),i()(this,"extendedMatrix",void 0),i()(this,"onDrag",void 0),i()(this,"onDragEnd",void 0),i()(this,"onDragStart",void 0),i()(this,"children",void 0),i()(this,"backgroundColor",void 0),i()(this,"border",void 0),i()(this,"position",void 0),i()(this,"cursor",void 0),i()(this,"text",void 0),i()(this,"zIndex",void 0),i()(this,"opacity",void 0)}),F=function(e){_()(t,e);var n=tt()(t);function t(o,h){var r;return L()(this,t),r=n.call(this,o,h),i()(j()(r),"mouseDown",void 0),i()(j()(r),"moveRefresh",void 0),i()(j()(r),"minX",void 0),i()(j()(r),"minY",void 0),i()(j()(r),"maxX",void 0),i()(j()(r),"maxY",void 0),i()(j()(r),"startDrag",function(p){if(r.props.movable){var m=p.clientX,g=p.clientY;r.mouseDown=!0;var l=function(c){if(r.mouseDown){c.stopImmediatePropagation();var v=c.clientX,y=c.clientY,C=v-m,x=y-g;m=v,g=y}},u=function B(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",B),r.mouseDown&&(r.mouseDown=!1)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",u)}}),i()(j()(r),"startInnerDrag",function(p){var m=p.clientX,g=p.clientY;r.mouseDown=!0,r.moveRefresh=!1;var l=function(v){var y,C,x,b,f,k;if(r.mouseDown){r.moveRefresh=!0,v.stopImmediatePropagation();var I=v.clientX,M=v.clientY,X=I-m,z=M-g,G=Math.round(((y=v.target)===null||y===void 0||(C=y.parentElement)===null||C===void 0||(x=C.getBoundingClientRect())===null||x===void 0?void 0:x.x)||0),J=Math.round(((b=v.target)===null||b===void 0||(f=b.parentElement)===null||f===void 0||(k=f.getBoundingClientRect())===null||k===void 0?void 0:k.y)||0);r.setState(function(T){var W=a.BoxSize,O=0,V=0,$=T.top+z,K=T.left+X;return S()(S()({},T),{},{top:$,left:K,width:O,height:V,boxSize:W,x:G,y:J})}),m=I,g=M}},u=function c(v){var y,C,x,b,f,k;(v==null||(y=v.target)===null||y===void 0||(C=y.attributes)===null||C===void 0||(x=C.name)===null||x===void 0?void 0:x.value)==="reverse"||(v==null||(b=v.target)===null||b===void 0||(f=b.attributes)===null||f===void 0||(k=f.name)===null||k===void 0?void 0:k.value)==="rotate"||r.setState(function(I){return document.removeEventListener("mousedown",c),S()(S()({},I),{},{rotatable:!1,reversible:!1})})},B=function c(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),r.mouseDown&&(r.mouseDown=!1),r.setState(function(v){return S()(S()({},v),{},{rotatable:!0,reversible:!0})},function(){document.addEventListener("mousedown",u),r.moveRefresh&&r.setState(function(v){var y=v.x,C=v.y,x=v.top,b=v.left,f=b+r.minX-y,k=x+r.minY-C,I=f+r.maxX-r.minX,M=k+r.maxY-r.minY,X=Math.round((Math.min(Math.max(f,b),I)-f)/a.BoxSize)*a.BoxSize+f,z=Math.round((Math.min(Math.max(k,x),M)-k)/a.BoxSize)*a.BoxSize+k;return S()(S()({},v),{},{left:X,top:z})})})};document.addEventListener("mousemove",l),document.addEventListener("mouseup",B)}),i()(j()(r),"onRotate",function(){var p=E.move2TopLeft(E.rotate(r.state.matrix));r.setState(function(m){return S()(S()({},m),{},{matrix:p})})}),i()(j()(r),"onReverse",function(){var p=E.move2TopLeft(E.reverse(r.state.matrix));r.setState(function(m){return S()(S()({},m),{},{matrix:p})})}),r.state=S()({},o),r}return P()(t,[{key:"render",value:function(){var h,r=(h=document.getElementById(a.Id))===null||h===void 0?void 0:h.getBoundingClientRect(),p=Math.round((r==null?void 0:r.x)||0),m=Math.round((r==null?void 0:r.y)||0),g=p,l=m,u=g+a.BoxSize*(a.Columns+5),B=l+a.BoxSize*(a.Rows-1);this.minX=g,this.minY=l,this.maxX=u,this.maxY=B;var c=this.props,v=c.key,y=c.border,C=c.cursor,x=c.boxCursor,b=c.boxBackgroundColor,f=c.position,k=c.zIndex,I=c.opacity,M=c.backgroundColor,X=c.text,z=this.state,G=z.top,J=z.left,T=z.width,W=z.height,O=z.x,V=z.y,$=z.boxSize,K=z.rotateAngle,H=z.matrix,ht=z.rotatable,Zt=z.reversible,Q=[];if(H&&H.length&&H[0])for(var Tt=H[0].length,Ht=H.length,A=0;A<Ht;A++)for(var N=0;N<Tt;N++){var w=new st;w.key="".concat(v,"-").concat(A,"-").concat(N),w.top=$*A,w.left=$*N;var At=this.state.matrix[A][N];At?(w.backgroundColor=b,w.cursor=x,w.zIndex=k+1,w.onDrag=this.startInnerDrag,w.width=$,w.height=$):(w.backgroundColor=void 0,w.cursor=void 0,w.zIndex=k-1,w.onDrag=this.startDrag,w.width=0,w.height=0),Q.push(w)}var Nt={top:G,left:J,width:T,height:W,transform:"rotate(".concat(K,"deg)"),cursor:C,userSelect:"none",border:y,backgroundColor:M,position:f||"absolute",zIndex:k,opacity:I};return(0,s.jsxs)(ot,{onMouseDown:this.startDrag,style:Nt,children:[this.props.children,X&&(0,s.jsx)("div",{style:{fontSize:"1.1em",lineHeight:"1em",margin:"0.6em 0.3em 0"},children:(0,s.jsx)(R.FormattedMessage,{id:X},"backboard-text-".concat(X))}),Q&&Q.map(function(D){var Ft={top:D.top,left:D.left,width:D.width,height:D.height,cursor:D.cursor,userSelect:"none",backgroundColor:D.backgroundColor,position:"absolute",zIndex:D.zIndex,opacity:D.opacity};return(0,s.jsx)(ot,{onMouseDown:D.onDrag,style:Ft,children:D.top===0&&D.left===0&&(ht||!0)&&(0,s.jsxs)("div",{style:{fontSize:"0.8em"},children:["x:".concat(O)," ",(0,s.jsx)("br",{}),"y:".concat(V)," ",(0,s.jsx)("br",{})]})},D.key)}),ht&&(0,s.jsx)("div",{className:"rotate",onClick:this.onRotate,children:(0,s.jsx)("svg",{width:"1.2em",height:"1.2em",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("image",{width:"1.2em",height:"1.2em",href:"/icons/cycle-arrow.png",name:"rotate"})})}),Zt&&(0,s.jsx)("div",{className:"reverse",onClick:this.onReverse,children:(0,s.jsx)("svg",{width:"1.2em",height:"1.2em",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("image",{width:"1.2em",height:"1.2em",href:"/icons/left-right-arrow.png",name:"reverse"})})})]})}}]),t}(et.PureComponent),lt=d(2453),U=d(71230),Z=d(15746),dt=d(52691),$t=d(61342),Lt=d(18662),Pt=d(27484),vt=d.n(Pt),Rt=function(e){_()(t,e);var n=tt()(t);function t(o,h){var r;L()(this,t),r=n.call(this,o,h),i()(j()(r),"dateSet",void 0),i()(j()(r),"onDateChange",function(u){var B=u.$W,c=u.$D-1,v=u.$M;B===r.state.week&&c===r.state.day&&v===r.state.month||r.setState(function(y){for(var C=y.backboard,x=0;x<a.Rows;x++)for(var b=0;b<a.Columns;b++){var f=C[x*a.Columns+b];f.text===""?f.backgroundColor="":(f.backgroundColor=a.backgroundColor[(x+b)%2],f.border=a.border)}return C[nt[B][0]*a.Columns+nt[B][1]].backgroundColor=a.backgroundColorHighLight,C[it[c][0]*a.Columns+it[c][1]].backgroundColor=a.backgroundColorHighLight,C[at[v][0]*a.Columns+at[v][1]].backgroundColor=a.backgroundColorHighLight,S()(S()({},y),{},{month:v,day:c,week:B})})}),i()(j()(r),"resolve",function(){lt.ZP.info("".concat((0,R.formatMessage)({id:"develop.wait"}))),fetch("http://localhost:8080/resolve?count=10").then(function(u){return u.json()}).then(function(u){console.log(u)}).catch(function(u){lt.ZP.info("".concat((0,R.formatMessage)({id:u})))})});for(var p=[],m=0;m<a.Rows;m++)for(var g=0;g<a.Columns;g++){var l=new st;l.key="backboard-".concat(m,"-").concat(g),l.top=a.BoxSize*m,l.left=a.BoxSize*g,l.width=a.BoxSize,l.height=a.BoxSize,l.zIndex=0,l.text=Mt[m][g],l.text===""?l.backgroundColor="":(l.backgroundColor=a.backgroundColor[(m+g)%2],l.border=a.border),p.push(l)}return r.state={backboard:p,month:0,day:0,week:0},r}return P()(t,[{key:"render",value:function(){this.dateSet||(this.dateSet=!0,this.onDateChange(vt()()));var h=this.state,r=h.minX,p=h.minY,m=h.maxX,g=h.maxY;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"center",children:"Here is play 11 .."}),(0,s.jsx)("div",{style:{padding:"2em 8em 0"},children:(0,s.jsx)("div",{id:a.Id,children:(0,s.jsxs)(U.Z,{children:[(0,s.jsx)(Z.Z,{span:11,children:this.state.backboard.map(function(l){return(0,s.jsxs)(F,{top:l.top,left:l.left,width:l.width,height:l.height,zIndex:l.zIndex,border:l.border,text:l.text,backgroundColor:l.backgroundColor,rotatable:!1,reversible:!1,children:[(l.text==="may"||l.text==="01")&&(0,s.jsxs)("div",{style:{fontSize:"0.8em"},children:["top: ".concat(l.top)," ",(0,s.jsx)("br",{}),"left: ".concat(l.left)," ",(0,s.jsx)("br",{})]},"backboard-test-".concat(l.key)),l.text==="january"&&(0,s.jsxs)("div",{style:{fontSize:"0.8em"},children:["mx: ".concat(r," ").concat(m)," ",(0,s.jsx)("br",{}),"my: ".concat(p," ").concat(g)," ",(0,s.jsx)("br",{})]},"backboard-test-".concat(l.key))]},"backboard-".concat(l.key))})}),(0,s.jsxs)(Z.Z,{span:8,children:[(0,s.jsx)(U.Z,{children:(0,s.jsx)(dt.ZP,{grid:{column:5},dataSource:Xt,renderItem:function(u){return(0,s.jsxs)(dt.ZP.Item,{children:[u.name,(0,s.jsx)(F,{top:0,left:0,pieceName:u.name,width:a.BoxSize/3*u.matrix.length,height:a.BoxSize/3*u.matrix.length,position:"relative",zIndex:-1,rotatable:!1,reversible:!1,movable:!1},"piece-pickup-placeholder-".concat(u.name)),(0,s.jsx)(F,{pieceName:u.name,top:a.BoxSize/3,left:a.BoxSize/3,width:0,height:0,maxX:m,maxY:g,minX:r,minY:p,matrix:u.matrix,boxBackgroundColor:u.color,zIndex:10,boxSize:a.BoxSize/3,position:"absolute",boxCursor:"pointer",opacity:.92,rotatable:!1,reversible:!1,movable:!1},"piece-pickup-".concat(u.name))]})}})}),(0,s.jsxs)(U.Z,{children:[(0,s.jsx)(Z.Z,{span:8,children:(0,s.jsx)($t.Z,{format:"YYYY-MM-DD",allowClear:!1,onChange:this.onDateChange,defaultValue:vt()()})}),(0,s.jsx)(Z.Z,{span:12,children:(0,s.jsx)(Lt.ZP,{type:"primary",onClick:this.resolve,children:(0,s.jsx)(R.FormattedMessage,{id:"resolve"})})})]})]}),(0,s.jsx)(Z.Z,{span:1,offset:1,children:(0,s.jsx)(R.SelectLang,{className:"ant-dropdown-trigger css-lye32u",reload:!1})})]})})})]})}}]),t}(et.Component)}}]);
